{"version":3,"sources":["components/MovieTheater/Seat.module.css","components/Paper/Paper.jsx","components/AppBar/AppBar.jsx","components/Card/Card.jsx","components/MovieCard/MovieCard.jsx","api/config.js","api/createRequest.js","api/fetchMovies.js","api/fetchMovie.js","api/bookTickets.js","api/getUserTickets.js","redux/movieSlice.js","redux/noticeSlice.js","components/MovieList/MovieList.jsx","redux/userSlice.js","components/User/User.jsx","components/MovieTheater/Seat.jsx","components/MovieTheater/MovieTheater.jsx","components/TicketList/TicketList.jsx","components/Notice/Notice.jsx","App.js","redux/store.js","serviceWorker.js","index.js"],"names":["module","exports","Paper","props","style","className","children","elevation","onClick","rootCls","classnames","AppBar","paperProps","Card","imageUrl","others","classNames","backgroundImage","MovieCard","movie","history","useHistory","e","push","id","poster","title","description","cast","director","runtime","enviroment","process","REACT_APP_ENV","protocol","host","config","path","createRequest","option","startsWith","slice","base","url","fetch","then","response","a","ok","json","errorResponse","Promise","reject","message","data","fetchMovies","fetchMovie","movieId","bookTickets","slotId","userId","seatIds","method","body","JSON","stringify","headers","getUserTickets","fetchAllMovies","createAsyncThunk","fetchMovieById","refresh","getState","selectMovie","movieSlice","createSlice","name","initialState","movies","status","reducers","updateSeatAvailability","state","action","tickets","payload","ticket","find","m","slots","s","slot","seats","seat","availability","extraReducers","builder","addCase","pending","fulfilled","rejected","found","findIndex","splice","actions","selectMovies","movieService","selectMovieStatus","noticeSlice","error","warning","info","dismissError","selectError","noticeService","MovieList","useSelector","dispatch","useDispatch","useEffect","unwrap","catch","map","user","sessionStorage","getItem","details","parse","loaded","userBookTickets","getTickets","userSlice","signIn","setItem","signOut","clear","addTickets","t","selectUser","selectUserTickets","selectStatus","selectIsLoaded","LoggedInUser","pathname","useLocation","useState","showMenu","setShowMenu","menuCls","hidden","color","SignInUser","User","Seat","selected","disabled","onToggle","Styled","available","stopPropagation","MovieTheater","useParams","seatSelected","setSeatSelected","dateSelected","setDateSelected","timeSelected","setTimeSelected","timeOptions","setTimeOptions","seatOptions","setSeatOptions","total","setTotal","reduce","acc","date","endTime","err","dates","Object","keys","length","times","time","timeToSelect","_slot","proceedBtnCls","loginReminderCls","subTitleCls","onChange","target","value","opt","args","finally","indexOf","price","handleSeatToggle","number","TicketList","startTime","hall","Notice","Logo","App","homepage","to","store","configureStore","reducer","userReducer","movieReducer","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f2cc5423.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"available\":\"Seat_available__gMd6U\",\"selected\":\"Seat_selected__3tu3N\"};","import classnames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * UI component Paper\r\n */\r\nexport default function Paper(props){\r\n\r\n\tconst {\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\televation = 1,\r\n\t\tonClick,\r\n\t} = props;\r\n\r\n\tconst rootCls = classnames( 'paper-default', className, {\r\n\t\t'shadow-sm': elevation === 1,\r\n\t\t'shadow': elevation === 2,\r\n\t\t'shadow-md': elevation === 3,\r\n\t\t'shadow-lg': elevation === 4,\r\n\t\t'shadow-xl': elevation === 5,\r\n\t\t'shadow-2xl': elevation === 6\r\n\t});\r\n\r\n\treturn (\r\n\t\t<div style={style} className={rootCls} onClick={onClick}>\r\n\t\t\t{children}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nPaper.propTypes = {\r\n\televation: PropTypes.oneOf([1,2,3,4,5,6]),\r\n\tonClick: PropTypes.func,\r\n};","import Paper from \"../Paper\";\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * UI component - AppBar\r\n */\r\nexport default function AppBar (props) {\r\n\r\n\tconst {\r\n\t\tchildren,\r\n\t\tclassName,\r\n\t\tstyle,\r\n\t\t...paperProps\r\n\t} = props;\r\n\r\n\tconst rootCls = classnames('appBar-default', className);\r\n\r\n\treturn (\r\n\t\t<Paper style={style} className={rootCls} {...paperProps}>\r\n\t\t\t{children}\r\n\t\t</Paper>\r\n\t);\r\n}","import Paper from '../Paper';\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * Card UI Component\r\n */\r\nexport default function Card (props) {\r\n\r\n\tconst { \r\n\t\tclassName,\r\n\t\tstyle,\r\n\t\timageUrl,\r\n\t\tchildren,\r\n\t\t...others\r\n\t} = props;\r\n\r\n\tconst rootCls = classNames( className );\r\n\r\n\treturn (\r\n\t\t<Paper\r\n\t\t\tclassName={rootCls}\r\n\t\t\tstyle={style}\r\n\t\t\t{...others}\r\n\t\t>\r\n\t\t\t{ imageUrl &&\r\n\t\t\t\t<div \r\n\t\t\t\t\tclassName=\"h-full w-48 flex-none bg-cover rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden\" \r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackgroundImage: `url('${imageUrl}')`\r\n\t\t\t\t\t}}>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t{children}\r\n\t\t</Paper>\r\n\t);\r\n}\r\n\r\nCard.propTypes = {\r\n\timageUrl: PropTypes.string\r\n};","import classNames from \"classnames\";\r\nimport { useHistory } from \"react-router\";\r\nimport Card from '../Card';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * UI component MovieCard - to display individual movie\r\n */\r\nexport default function MovieCard (props) {\r\n\r\n\tconst {\r\n\t\tclassName,\r\n\t\tstyle,\r\n\t\tmovie\r\n\t} = props;\r\n\t\r\n\tconst rootCls = classNames( 'movieCard-default', className );\r\n\r\n\tlet history = useHistory();\r\n\tconst handleClick = function(e){\r\n\t\thistory.push(`/movie/${movie.id}`);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Card \r\n\t\t\tclassName={rootCls}\r\n\t\t\tstyle={style}\r\n\t\t\tonClick={handleClick}\r\n\t\t\timageUrl={movie.poster}\r\n\t\t>\r\n\t\t\t<div className=\"flex flex-col justify-between p-2 h-full\">\r\n\t\t\t\t<div className=\"flex flex-col\">\r\n\t\t\t\t\t<div className=\"text-gray-900 font-bold text-xl mb-2\">{movie.title}</div>\r\n\t\t\t\t\t<p className=\"text-gray-700 text-lg text-base\">{movie.description}</p>\r\n\t\t\t\t\t<p className=\"text-gray-500 text-sm text-base\">Cast: {movie.cast}</p>\r\n\t\t\t\t\t<p className=\"text-gray-500 text-sm text-base\">Director: {movie.director}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"text-right\"> {movie.runtime} mins </div>\r\n\t\t\t</div>\r\n\t\t</Card>\r\n\t);\r\n}\r\n\r\nMovieCard.propTypes = {\r\n\tmovie: PropTypes.object\r\n};","// common configuration\r\nconst common = {\r\n\tpath: \"/api/v1\",\r\n}\r\n\r\n// development configuration\r\nconst dev = {\r\n\tprotocol: \"http\",\r\n\thost: \"localhost:8080\",\r\n};\r\n\r\n// production configuration\r\nconst prod = {\r\n\tprotocol: \"https\",\r\n\thost: \"murmuring-wildwood-07967.herokuapp.com\",\r\n};\r\n\r\nconst enviroment = process.env.REACT_APP_ENV === 'development' ? dev : prod;\r\n\r\nconst config = {\r\n\t...{\r\n\t\t...common,\r\n\t\t...enviroment\r\n\t}\r\n}\r\n\r\nexport default config;","import config from './config';\r\n\r\n/*\r\n *\tTo standardize request making and error handling for all api fetch\r\n * \t@param {string} path  \r\n *\t@return {Promise}\r\n */\r\nexport default function createRequest(path, option = {}){\r\n\r\n\t// to remove '/' at the beginning if any\r\n\tif(path.startsWith('/')){\r\n\t\tpath = path.slice(1);\r\n\t}\r\n\r\n\tconst base = `${config.protocol}://${config.host}${config.path}`;\r\n\tconst url = `${base}/${path}`;\r\n\r\n\treturn fetch(url,option)\r\n\t\t\t\t\t\t.then( async (response) => {\r\n\t\t\t\t\t\t\tif(response.ok){\r\n\t\t\t\t\t\t\t\treturn response.json();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlet errorResponse = await response.json();\r\n\t\t\t\t\t\t\t\treturn Promise.reject(errorResponse.message)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(data => data);\r\n}","import createRequest from './createRequest';\r\n\r\n/**\r\n *\tTo fetch all movies from server\r\n *\t@return {Promise}\r\n */\r\nexport default async function fetchMovies(){\r\n\tlet path = 'movie/all';\r\n\treturn createRequest(path);\r\n}\r\n","import createRequest from './createRequest';\r\n\r\n/**\r\n * To fetch single movie by Id\r\n * \r\n * @param {String} movieId \r\n * @returns {Promise}  \r\n */\r\nexport default function fetchMovie (movieId) {\r\n\tconst path = `movie/${movieId}`;\r\n\treturn createRequest(path);\r\n}","// import config from './config';\r\nimport createRequest from './createRequest';\r\n\r\n/**\r\n * To book ticket(s) for user\r\n *\r\n * @param {string} movieId\r\n * @param {string} slotId\r\n * @param {string} userId\r\n * @param {string[]} seatIds\r\n * @return {Promise}\t\r\n */\r\nexport default function bookTickets(movieId, slotId, userId, seatIds){\r\n\r\n\tconst path = `movie/${movieId}/slot/${slotId}/${userId}`;\r\n\tconst option = {\r\n\t\tmethod: \"POST\",\r\n\t\tbody: JSON.stringify(seatIds),\r\n\t\theaders: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n\t}\r\n\r\n\treturn createRequest(path,option);\r\n\r\n}","import createRequest from './createRequest';\r\n\r\n/**\r\n * to fetch all tickets previously booked by user\r\n * @param {string} userId \r\n * @return {Promise}\r\n */\r\nexport default function getUserTickets (userId){\r\n\tconst path = `ticket/${userId}`;\r\n\treturn createRequest(path);\r\n}","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport { \r\n\tfetchMovie,\r\n\tfetchMovies \r\n} from '../api';\r\n\r\n// Initial State\r\nconst initialState = {\r\n  // list of movies\r\n  movies: [],\r\n  // status of async action\r\n\tstatus: 'idle',\r\n};\r\n\r\n/**\r\n * An async action to get all movies in db\r\n */\r\nexport const fetchAllMovies = createAsyncThunk(\r\n  'movieService/fetchMovies',\r\n  async () => {\r\n    try{\r\n      // request all movies from remote server\r\n      const response = await fetchMovies();\r\n      return response;\r\n    } catch(error){\r\n      return Promise.reject(error);\r\n    }\r\n  }\r\n);\r\n\r\n/**\r\n * An async action to get a movie by id\r\n */\r\nexport const fetchMovieById = createAsyncThunk(\r\n\t'movieService/fetchMovie',\r\n\tasync ({ movieId, refresh = false}, {getState}) => {\r\n    try{\r\n      // try to get movie from current state\r\n      const movie = selectMovie(movieId)(getState());\r\n      // request moive detail from server if movie is not found locally\r\n      if(!movie || refresh){\r\n        // fetchMovie will throw an error when something goes wrong\r\n        const response = await fetchMovie(movieId);\r\n        return response; // should be an movie object\r\n      } else return null; // do nothing if movie requested is found locally\r\n    } catch (error){\r\n      return Promise.reject(error);\r\n    }\r\n\t}\r\n)\r\n\r\n/**\r\n * This handle the states of movie(s), movie's slot & seats for a particular slot\r\n * A movie slot = a movie + a hall + a time \r\n */\r\nexport const movieSlice = createSlice({\r\n  name: 'movieService',\r\n  initialState,\r\n  reducers: {\r\n    // Action to update seat(s) availability (to unavailable) by a list of tickets which were successfully purchased\r\n    // list of tickets are in action.payload\r\n    updateSeatAvailability: (state, action) => {\r\n      const tickets = action.payload;\r\n      for(let ticket of tickets){\r\n        let movie = state.movies.find(m => m.id === ticket.movie.id);\r\n        let slot  = movie.slots.find(s => s.id === ticket.slot.id);\r\n        let seat  = slot.seats.find(s => s.id === ticket.seat.id);\r\n        seat.availability = ticket.seat.availability;\r\n      }\r\n    }\r\n  },\r\n\textraReducers: (builder) => {\r\n    builder\r\n      .addCase(fetchAllMovies.pending, (state) => {\r\n        state.status = 'loading';\r\n      })\r\n      .addCase(fetchAllMovies.fulfilled, (state, action) => {\r\n        state.status = 'idle';\r\n        state.movies = action.payload;\r\n      })\r\n      .addCase(fetchAllMovies.rejected, (state, action) => {\r\n        state.status = 'idle';\r\n      })\r\n\t\t\t.addCase(fetchMovieById.pending, (state) => {\r\n        state.status = 'loading';\r\n      })\r\n      // action to add movie to list of movies when requested movie details from server \r\n\t\t\t.addCase(fetchMovieById.fulfilled, (state,action) => {\r\n\t\t\t\tstate.status = 'idle';\r\n        if(action.payload) {\r\n          let movie = action.payload;\r\n          let found = state.movies.findIndex(m => m.id === movie.id);\r\n          if(found === -1) state.movies.push(action.payload);\r\n          else {\r\n            state.movies.splice(found, 1);\r\n            state.movies.push(movie);\r\n          }\r\n        }\r\n\t\t\t})\r\n      .addCase(fetchMovieById.rejected, (state, action) => {\r\n        state.status = 'idle';\r\n      });\r\n  },\r\n});\r\n\r\nexport const { updateSeatAvailability } = movieSlice.actions;\r\n\r\n// to select a list of movies\r\nexport const selectMovies = (state) => state.movieService.movies;\r\n// to select a movie by id from the list of movies\r\nexport const selectMovie  = (movieId) => (state) => state.movieService.movies.find( movie => movie.id === movieId);\r\n// to select async state\r\nexport const selectMovieStatus = (state) => state.movieService.status;\r\n\r\nexport default movieSlice.reducer;\r\n","import { createSlice } from '@reduxjs/toolkit';\r\n\r\nconst initialState = {\r\n  error: null,\r\n\twarning: null,\r\n\tinfo: null\r\n};\r\n\r\nexport const noticeSlice = createSlice({\r\n  name: 'noticeService',\r\n  initialState,\r\n  reducers: {\r\n    // set an error\r\n    error: (state, action) => {\r\n      state.error = action.payload;\r\n    },\r\n    // dismiss an error\r\n    dismissError: (state) => {\r\n      state.error = null;\r\n    }\r\n  },\r\n  \r\n});\r\n\r\nexport const { error, dismissError } = noticeSlice.actions;\r\nexport const selectError = (state) => state.noticeService.error;\r\n\r\nexport default noticeSlice.reducer;","import classNames from \"classnames\";\r\nimport { useEffect } from \"react\";\r\nimport MovieCard from \"../MovieCard\";\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n\tselectMovies,\r\n\tfetchAllMovies,\r\n\tselectMovieStatus\r\n} from '../../redux/movieSlice';\r\nimport {\r\n\terror \r\n} from '../../redux/noticeSlice';\r\n\r\n/**\r\n * A page to display a list of movies\r\n */\r\nexport default function MovieList (props) {\r\n\r\n\tconst {\r\n\t\tclassName,\r\n\t\tstyle\r\n\t} = props;\r\n\r\n\tconst movies = useSelector(selectMovies);\r\n\tconst status = useSelector(selectMovieStatus);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst rootCls = classNames( \"grid gap-4 grid-cols-1 lg:grid-cols-2\", className);\r\n\r\n\tuseEffect(function(){\r\n\t\tdispatch(fetchAllMovies())\r\n\t\t.unwrap()\r\n\t\t.catch(e => {\r\n\t\t\tdispatch(error(e))\r\n\t\t})\r\n\t},[dispatch]);\r\n\r\n\treturn (\r\n\t\t<div className={rootCls} style={style}>\r\n\t\t\t{\r\n\t\t\t\tstatus === 'loading' &&\r\n\t\t\t\t<div>loading...</div>\r\n\t\t\t}\r\n\t\t\t{ status !== 'loading' && movies.map( (movie) => <MovieCard key={movie.id} movie={movie}></MovieCard> ) }\r\n\t\t</div>\r\n\t);\r\n}","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport { \r\n  bookTickets,\r\n  getUserTickets\r\n} from '../api';\r\n\r\n// try to get user from sessionStorage\r\n// No authentication is implemented in this app, so user are created dynamically and store in sessionStorage\r\nconst user = sessionStorage.getItem('user');\r\nconst initialState = {\r\n\tdetails: user ? JSON.parse(user) : null, // an object to represent user \r\n  tickets: [], // list of tickets by user\r\n  status: 'idle', // status of user async actions\r\n  loaded: false // to check if \r\n};\r\n\r\n// An async action to book tickets for user\r\nexport const userBookTickets = createAsyncThunk(\r\n  'userService/bookTickets',\r\n  async ({movieId, slotId, userId, seatIds}, {dispatch}) => {\r\n    try {\r\n      const tickets = await bookTickets(movieId, slotId, userId, seatIds);  \r\n      return tickets; \r\n    } catch (error){\r\n      return Promise.reject(error);\r\n    }\r\n  }\r\n);\r\n\r\n// An async action to get all previously booked tickets for user\r\nexport const getTickets = createAsyncThunk(\r\n  'userService/getTickets',\r\n  async (userId, {dispatch}) => {\r\n    try {\r\n      const tickets = await getUserTickets(userId);\r\n      return tickets;\r\n    } catch (error) {\r\n      return Promise.reject(error);\r\n    }\r\n  }\r\n);\r\n\r\n// This handle user state and actions\r\nexport const userSlice = createSlice({\r\n  name: 'userService',\r\n  initialState,\r\n  reducers: {\r\n    // sign in user action\r\n    signIn: (state) => {\r\n\r\n\t\t\tlet user = {\r\n\t\t\t\tid: \"abc\"\r\n\t\t\t};\r\n\t\r\n\t\t\tsessionStorage.setItem('user', JSON.stringify(user));\r\n\r\n\t\t\tstate.details = user;\r\n    },\r\n    // sign out user action\r\n    signOut: (state) => {\r\n\t\t\t\r\n\t\t\tsessionStorage.clear();\r\n\r\n\t\t\tstate.details = null;\r\n    },\r\n    // enlist user's tickets\r\n    addTickets: (state, action) => {\r\n      const tickets = action.payload;\r\n      for(const ticket of tickets){\r\n        state.tickets.push(ticket);\r\n      }\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(userBookTickets.pending, (state) => {\r\n        state.status = 'loading';\r\n      })\r\n      .addCase(userBookTickets.fulfilled, (state, action) => {\r\n        state.status = 'idle';\r\n        state.tickets.push(...action.payload);\r\n      })\r\n      .addCase(getTickets.pending, (state) => {\r\n        state.status = 'loading';\r\n      })\r\n      .addCase(getTickets.fulfilled, (state, action) => {\r\n        state.status = 'idle';\r\n        state.loaded = true;\r\n        const tickets = action.payload;\r\n        for(const ticket of tickets){\r\n          if(!state.tickets.find(t => t.id === ticket.id)){\r\n            state.tickets.push(ticket);\r\n          }\r\n        }  \r\n      });\r\n  },\r\n});\r\n\r\nexport const { signIn, signOut, addTickets } = userSlice.actions;\r\n\r\nexport const selectUser = (state) => state.user.details;\r\nexport const selectUserTickets = (state) => state.user.tickets;\r\nexport const selectStatus = (state) => state.user.status;\r\nexport const selectIsLoaded = (state) => state.user.loaded;\r\n\r\nexport default userSlice.reducer;","import classNames from \"classnames\";\r\nimport { useState } from \"react\";\r\nimport 'boxicons';\r\nimport { \r\n\tuseHistory,\r\n\tuseLocation \r\n} from \"react-router-dom\";\r\nimport {\r\n\tsignIn,\r\n\tsignOut,\r\n\tselectUser\r\n} from \"../../redux/userSlice\";\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\n/**\r\n * Component to handle user who has sign in.\r\n */\r\nconst LoggedInUser = function(){\r\n\r\n\tlet { pathname } = useLocation();\r\n\tlet history = useHistory();\r\n\tconst dispatch = useDispatch();\r\n\tlet [showMenu, setShowMenu] = useState(false);\r\n\r\n\tconst menuCls = classNames(\"absolute w-40 bg-white right-0 shadow-md p-2 group-hover:block\", {\r\n\t\thidden: !showMenu\r\n\t});\r\n\r\n\t/**\r\n\t * Event handler to toggle visibility of user dropdown menu\r\n\t */\r\n\tconst handleToggleMenu = function(){\r\n\t\tsetShowMenu(!showMenu);\r\n\t}\r\n\r\n\t/**\r\n\t * Event handler when user clik to vie 'My Tickets'\r\n\t */\r\n\tconst goMyTicket = function(){\r\n\t\thistory.push(\"/tickets\");\r\n\t}\r\n\r\n\t/**\r\n\t * Event handling to simulate user sign out by removing sessionStorage\r\n\t */\r\n\tconst handleSignOut = function(){\r\n\t\tdispatch(signOut());\r\n\r\n\t\t// direct to home page if user is currently at tickets page\r\n\t\tif(pathname === '/tickets'){\r\n\t\t\thistory.push('/');\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"group relative\">\r\n\t\t\t<button className=\"flex items-center\" onClick={handleToggleMenu}> \r\n\t\t\t\t<span className=\"hidden md:inline-block\"> Welcome back! </span> \r\n\t\t\t\t<div \r\n\t\t\t\t\tclassName=\"rounded-full h-10 w-10 flex items-center justify-center bg-blue-200 ml-2\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<box-icon name='user' color=\"white\"></box-icon>\r\n\t\t\t\t</div>\r\n\t\t\t</button>\r\n\t\t\t<ul className={menuCls}>\r\n\t\t\t\t<li className=\"px-3 py-2\">\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"flex items-center justify-between\"\r\n\t\t\t\t\t\tonClick={goMyTicket}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<box-icon name='barcode'></box-icon>\r\n\t\t\t\t\t\t<span className=\"ml-2\">My Tickets</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className=\"px-3 py-2 hower:bg-gray-100\">\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"flex items-center justify-between \"\r\n\t\t\t\t\t\tonClick={handleSignOut}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<box-icon name='log-out'></box-icon>\r\n\t\t\t\t\t\t<span className=\"ml-2 flex-grow\">Sign Out</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n/**\r\n * handle user who has not sign in.\r\n */\r\nconst SignInUser = function(){\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\t/**\r\n\t\t*  Event handling to simulate user login by randomly create user with sessionStorage\r\n\t\t*/\r\n\tconst handleSignIn = function(){\r\n\t\tdispatch(signIn());\r\n\t}\r\n\r\n\treturn (\r\n\t\t<button className=\"flex items-center\" onClick={handleSignIn}>\r\n\t\t\t<box-icon name='log-in'></box-icon>\r\n\t\t</button>\r\n\t);\r\n}\r\n\r\n/**\r\n * To handle user operation and UI\r\n */\r\nexport default function User (props) {\r\n\r\n\tconst {\r\n\t\tclassName,\r\n\t\tstyle\r\n\t} = props;\r\n\r\n\t// User state\r\n\tlet user = useSelector(selectUser);\r\n\r\n\tconst rootCls = classNames( className );\r\n\r\n\treturn (\r\n\t\t<div \r\n\t\t\tclassName={rootCls}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t{!user ? <SignInUser></SignInUser> : <LoggedInUser></LoggedInUser>}\r\n\t\t</div>\r\n\t)\r\n}","import Styled from \"./Seat.module.css\";\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * UI component Seat - to represent a seat in theater\r\n */\r\nexport default function Seat (props){\r\n\r\n\tconst {\r\n\t\tchildren,\r\n\t\tselected,\t// seat is selected\r\n\t\tdisabled, // seat is disabled\r\n\t\tonToggle, // toggle state of seat \r\n\t} = props;\r\n\r\n\tconst rootCls = classNames(\"h-12 md:h-16 lg:h-24 flex justify-center items-center rounded-md\", \r\n\t\tdisabled ? \"bg-gray-300 cursor-default\" : \"bg-white cursor-pointer\", {\r\n\t\t[Styled.selected]: selected && !disabled,\r\n\t\t[Styled.available]: !selected,\r\n\t});\r\n\r\n\t/**\r\n\t * Event handler to triggle when seat is click \r\n\t * @param {Event} e \r\n\t * @returns \r\n\t */\r\n\tconst handleToggle = function(e){\r\n\t\t// callback onToggle if it is not disabled\r\n\t\treturn disabled ? e.stopPropagation : onToggle(e);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div \r\n\t\t\tclassName={rootCls} \r\n\t\t\tonClick={handleToggle}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\nSeat.propTypes = {\r\n\tselected: PropTypes.bool,\r\n\tdisabled: PropTypes.bool,\r\n\tonToggle: PropTypes.func\r\n};","import classNames from \"classnames\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport Paper from \"../Paper\";\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n\tselectMovie,\r\n\tfetchMovieById,\r\n\tselectMovieStatus,\r\n\tupdateSeatAvailability\r\n} from '../../redux/movieSlice';\r\nimport {\r\n\terror,\r\n} from '../../redux/noticeSlice';\r\nimport {\r\n\tselectUser,\r\n\tuserBookTickets\r\n} from '../../redux/userSlice';\r\nimport MovieCard from \"../MovieCard\";\r\nimport Seat from './Seat';\r\n\r\n/*\r\n * A page to facilitate ticket booking process for a selected movie by id\r\n */\r\nexport default function MovieTheater (props) {\r\n\r\n\tconst { movieId } = useParams(); \r\n\tconst dispatch = useDispatch();\r\n\tconst user = useSelector(selectUser);\t// current user\r\n\tconst movie = useSelector(selectMovie(movieId)); // movie details\r\n\tconst status = useSelector(selectMovieStatus);\r\n\tconst [seatSelected, setSeatSelected] = useState([]);\r\n\tconst [dateSelected, setDateSelected] = useState(\"\");\r\n\tconst [timeSelected, setTimeSelected] = useState(\"\");\r\n\tconst [timeOptions, setTimeOptions] = useState([]);\r\n\tconst [seatOptions, setSeatOptions] = useState([]);\r\n\tconst [total, setTotal] = useState(0); // total cost of selected tickets\r\n\tconst slots = movie ? movie.slots.reduce((acc,slot) => {\r\n\t\tlet date = slot.date;\r\n\t\tif( !(date in acc) ){\r\n\t\t\tacc[date] = {};\r\n\t\t} \r\n\t\tacc[date][slot.endTime] = slot\r\n\t\treturn acc;\r\n\t},{}) : {};\r\n\t\r\n\tuseEffect(() => {\r\n\r\n\t\t// fetch movie by id\r\n\t\tdispatch(fetchMovieById({movieId}))\r\n\t\t.unwrap()\r\n\t\t.catch(err => dispatch(error(err)));\r\n\t\r\n\t\tlet dates = Object.keys(slots);\r\n\t\tif(dates.length){\r\n\t\t\t// select the first date\r\n\t\t\tlet dateSelected = dates[0];\r\n\t\t\tsetDateSelected(dateSelected);\r\n\t\t\t\r\n\t\t\t// prepare time options\r\n\t\t\tlet slot = slots[dateSelected];\r\n\t\t\tlet times = Object.keys(slot).map(time => ({id: slot[time].id, time: time}));\r\n\t\t\tsetTimeOptions(times);\r\n\r\n\t\t\tif(times.length) {\r\n\t\t\t\t// selet the first time slot\r\n\t\t\t\tlet timeToSelect = times[0].id;\r\n\t\t\t\tsetTimeSelected(timeToSelect);\r\n\t\t\t\t\r\n\t\t\t\t// prepare seats options for the selected date and time\r\n\t\t\t\tlet selectedSlot = movie.slots.find(_slot => _slot.id === timeToSelect);\r\n\t\t\t\tlet seats = selectedSlot.seats;\r\n\t\t\t\tsetSeatOptions(seats)\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}, [movie]);\r\n\r\n\tconst proceedBtnCls = classNames(\r\n\t\t'mt-3 border rounded  text-white p-2 text-lg font-medium',\r\n\t\t!seatSelected.length || !user? 'bg-gray-300' : 'bg-green-400'\r\n\t);\r\n\r\n\tconst loginReminderCls = classNames(\r\n\t\t\"text-right text-blue-500\",\r\n\t\t{\r\n\t\t\thidden: user \r\n\t\t}\r\n\t);\r\n\r\n\tconst subTitleCls = classNames(\r\n\t\t'text-md', 'font-medium'\r\n\t)\r\n\r\n\t/**\r\n\t * Event handling of toggling seat selection\r\n\t * \r\n\t * @param {Event} e \r\n\t * @param {string} id seat id \r\n\t */\r\n\tconst handleSeatToggle = function(e, seat){\r\n\r\n\t\tconst { id } = seat; \r\n\t\tconst found = seatSelected.indexOf(id);\r\n\r\n\t\tif(found === -1){\r\n\t\t\t// select a seat\r\n\t\t\tsetSeatSelected([...seatSelected, id]);\r\n\t\t\tsetTotal(total + seat.price);\r\n\t\t} else {\r\n\t\t\t// unselect a seat\r\n\t\t\tseatSelected.splice(found,1);\r\n\t\t\tsetSeatSelected([...seatSelected]);\r\n\t\t\tsetTotal(total - seat.price);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Event handling of seat(s) booking\r\n\t * @param {Event} e \r\n\t */\r\n\tconst handleSeatBooking = function(){\r\n\r\n\t\tlet args = {\r\n\t\t\tmovieId: movieId,\r\n\t\t\tslotId: timeSelected,\r\n\t\t\tuserId: user.id,\r\n\t\t\tseatIds: seatSelected\r\n\t\t};\r\n\r\n\t\tdispatch(userBookTickets(args))\r\n\t\t.unwrap()\r\n\t\t.then(tickets => {\r\n\t\t\t// update seat(s) availability\r\n\t\t\tdispatch(updateSeatAvailability(tickets));\t\r\n\t\t})\r\n\t\t.catch(err => {\r\n\t\t\tdispatch(error(err));\r\n\t\t\t// to update seat availability\r\n\t\t\tdispatch(fetchMovieById({movieId, refresh: true}))\r\n\t\t}).finally(() => {\r\n\t\t\t// clear selected seats\r\n\t\t\tsetSeatSelected([]);\r\n\t\t\t// clear total\r\n\t\t\tsetTotal(0);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div> \r\n\t\t\t{ \r\n\t\t\t\t!movie && status === 'loading' && \r\n\t\t\t\t<div> loading... </div>\r\n\t\t\t}\r\n\t\t\t{ movie && \r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"flex\">\r\n\t\t\t\t\t\t<MovieCard className=\"hidden md:flex flex-grow\" movie={movie}></MovieCard>\r\n\t\t\t\t\t\t<Paper className=\"flex-col p-5 md:w-96 w-full\" elevation={1}>\r\n\t\t\t\t\t\t\t<div className=\"w-full mb-2\">\r\n\t\t\t\t\t\t\t\t<span className=\"text-gray-900 font-bold text-xl\">{movie.title}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"flex flex-col w-full mb-2\">\r\n\t\t\t\t\t\t\t\t<span className={subTitleCls}>DATE:</span> \r\n\t\t\t\t\t\t\t\t<select onChange={(e) => setDateSelected(e.target.value)} value={dateSelected}>\r\n\t\t\t\t\t\t\t\t\t<option value=\"\" disabled>select a date</option>\r\n\t\t\t\t\t\t\t\t\t{Object.keys(slots).map(date => <option value={date} key={date}>{date}</option>)}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"flex flex-col w-full mb-2\">\r\n\t\t\t\t\t\t\t\t<span className={subTitleCls}>TIME:</span> \r\n\t\t\t\t\t\t\t\t<select onChange={(e) => setTimeSelected(e.target.value)} value={timeSelected}>\r\n\t\t\t\t\t\t\t\t\t<option value=\"\" disabled>select a time</option>\r\n\t\t\t\t\t\t\t\t\t{timeOptions.map(opt => <option value={opt.id} key={opt.id}>{opt.time}</option>)}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"flex flex-row w-full mb-2 justify-between\">\r\n\t\t\t\t\t\t\t\t<div className={subTitleCls}> {seatSelected.length} tickets</div>\r\n\t\t\t\t\t\t\t\t<div className={subTitleCls}> SGD {total}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"flex flex-col w-full\">\r\n\t\t\t\t\t\t\t\t<button \r\n\t\t\t\t\t\t\t\t\tclassName={proceedBtnCls} \r\n\t\t\t\t\t\t\t\t\tonClick={handleSeatBooking}\r\n\t\t\t\t\t\t\t\t\tdisabled={!seatSelected.length || !user}\r\n\t\t\t\t\t\t\t\t>Book Now</button>\r\n\t\t\t\t\t\t\t\t<div className={loginReminderCls}>Please login to proceed.</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"flex justify-center border my-2 bg-white\"> screen</div>\r\n\t\t\t\t\t<div className=\"grid grid-cols-8 gap-1 md:gap-2 lg:gap-4\">\r\n\t\t\t\t\t\t{seatOptions.map(s => \r\n\t\t\t\t\t\t\t<Seat key={s.id} \r\n\t\t\t\t\t\t\t\tonToggle={(e) => handleSeatToggle(e,s)} \r\n\t\t\t\t\t\t\t\tselected={seatSelected.indexOf(s.id) !== -1}\r\n\t\t\t\t\t\t\t\tdisabled={!s.availability}\r\n\t\t\t\t\t\t\t>{s.number}</Seat>)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t</div>\r\n\t);\r\n}","import { useEffect } from \"react\";\r\nimport classNames from \"classnames\";\r\nimport Card from \"../Card\";\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n\tselectUser,\r\n\tselectStatus,\r\n\tselectIsLoaded,\r\n\tselectUserTickets,\r\n\tgetTickets\r\n} from '../../redux/userSlice';\r\nimport {\r\n\terror,\r\n\tdismissError\r\n} from '../../redux/noticeSlice';\r\n\r\n/**\r\n * A page to display user's tickets\r\n */\r\nexport default function TicketList (props) {\r\n\r\n\tconst {\r\n\t\tclassName,\r\n\t\tstyle\r\n\t} = props;\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst tickets = useSelector(selectUserTickets);\r\n\tconst user = useSelector(selectUser);\r\n\tconst status = useSelector(selectStatus);\r\n\tconst loaded = useSelector(selectIsLoaded);\r\n\r\n\tuseEffect(() => {\r\n\t\t// to get all user tickets for only one time\r\n\t\tif(!loaded && user) {\r\n\t\t\tdispatch(dismissError());\r\n\t\t\tdispatch(getTickets(user.id));\r\n\t\t}\r\n\t\tif(!user){\r\n\t\t\tdispatch(error({ message: 'Please login to view tickets'}));\r\n\t\t} \r\n\t}, [user,dispatch]);\r\n\r\n\tconst rootCls = classNames( \"grid gap-4 grid-cols-1 lg:grid-cols-3 md:grid-cols-2\", className );\r\n\r\n\treturn (\r\n\t\t<div \r\n\t\t\tclassName={rootCls}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t{ status === 'loading' && <div>loading...</div>}\r\n\t\t\t{ status === 'idle' && user && !tickets.length && <div>No ticket available</div>}\r\n\t\t\t{ \r\n\t\t\t\tstatus === 'idle' && \r\n\t\t\t\ttickets.map( ticket => \r\n\t\t\t\t\t<Card key={ticket.id} elevation={2} imageUrl={ticket.movie.poster}>\r\n\t\t\t\t\t\t<div className=\"flex flex-col p-2 w-full\">\r\n\t\t\t\t\t\t\t<div className=\"font-bold text-lg\">{ticket.movie.title}</div> \r\n\t\t\t\t\t\t\t<div className=\"text-gray-700 text-lg\">{ticket.slot.date}</div> \r\n\t\t\t\t\t\t\t<div className=\"mb-5 text-gray-700 text-lg\">{ticket.slot.startTime}</div>\r\n\t\t\t\t\t\t\t<div className=\"text-right font-bold text-xl text-blue-700\">Hall {ticket.slot.hall} Seat {ticket.seat.number}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Card>\t\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t</div>\r\n\t);\r\n}","import classNames from \"classnames\"\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n\tselectError,\r\n\tdismissError\r\n} from '../../redux/noticeSlice';\r\n\r\n/**\r\n * This component is resposible to subscribe system-wide notification(s), eg, error, info, warning and etc\r\n */\r\nexport default function Notice (props){\r\n\r\n\tconst error = useSelector(selectError);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst rootCls = classNames('flex justify-center items-center', 'rounded', 'bg-red-100', 'p-3', 'text-red-500','my-2');\r\n\r\n\tconst handleClose = function () {\r\n\t\tdispatch(dismissError());\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ \r\n\t\t\t\terror && \r\n\t\t\t\t<div \r\n\t\t\t\t\tclassName={rootCls}>\r\n\t\t\t\t\t<span className=\"flex-grow\" >{error.message}</span>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"rounded-full h-6 w-6 bg-white flex justify-center items-center font-bold text-xl\" \r\n\t\t\t\t\t\tonClick={handleClose}><span>&times;</span></button>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t</>\r\n\t)\r\n}","import React from 'react';\nimport {\n  Switch,\n  Route,\n  Link,\n} from 'react-router-dom';\nimport AppBar from './components/AppBar';\nimport MovieList from './components/MovieList';\nimport User from './components/User';\nimport MovieTheater from './components/MovieTheater';\nimport TicketList from './components/TicketList';\nimport Notice from './components/Notice';\n\n/**\n * Simple Logo\n */\nconst Logo = function () {\n  return (\n    <>\n      <span className=\"font-bold text-3xl text-blue-700\">OCB</span>\n      <span className=\"text-3xl text-blue-500\">Cinema</span>\n    </>\n  );\n}\n\nfunction App() {\n  const homepage = process.env.REACT_APP_ENV === 'development' ? '/' : '/movie-ticketing/';\n  return (\n    <div className=\"bg-gray-100 h-screen\">\n      <AppBar elevation={3}>\n        <div className=\"flex-grow\">\n          <Link to={homepage}><Logo></Logo></Link>\n        </div>\n        <User></User>\n      </AppBar>\n      <div className=\"p-3\">\n        <Notice></Notice>\n        <Switch>\n          <Route path={homepage + \"movie/:movieId\"}>\n            <MovieTheater></MovieTheater>\n          </Route>\n          <Route path={homepage + \"tickets\"}>\n            <TicketList></TicketList>\n          </Route>\n          <Route path={homepage}>\n            <MovieList></MovieList>\n          </Route>\n        </Switch>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import { configureStore } from '@reduxjs/toolkit';\nimport userReducer from './userSlice';\nimport movieReducer from './movieSlice';\nimport noticeSlice from './noticeSlice';\n\nexport const store = configureStore({\n  reducer: {\n    user: userReducer,\n    movieService: movieReducer,\n    noticeService: noticeSlice\n  },\n});\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { store } from './redux/store';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\nimport {\n  BrowserRouter as Router\n} from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}